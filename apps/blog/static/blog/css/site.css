/* apps/blog/static/blog/css/site.css */

/* ---------- Base ---------- */
html, body {
  height: 100%;
}
body {
  margin: 0;
  background: #000;
  color: #fff;
}

/* ---------- Text helpers ---------- */
.hint {
  color: #aaa;
  font-size: 13px;
  line-height: 1.5;
}
.hint-pad { padding: 6px 0; }

.mt-8 { margin-top: 8px; }
.mt-12 { margin-top: 12px; }

/* ---------- Buttons / Links ---------- */
.btn,
.close-btn {
  border: 1px solid #333;
  background: #151515;
  color: #fff;
  border-radius: 10px;
  padding: 6px 10px;
  cursor: pointer;
  opacity: 0.88;
  text-decoration: none;
  display: inline-block;
}
.btn:hover,
.close-btn:hover { opacity: 1; }

/* ---------- Board header / Flag ---------- */
.board-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
}

.flag-img {
  display: block;
  margin: 10px 0 8px;
  border-radius: 6px;
}

/* ---------- Tabs ---------- */
.tabs {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
}
.tabs a {
  border: 1px solid #333;
  background: #0b0b0b;
  color: #fff;
  border-radius: 10px;
  padding: 8px 10px;
  text-decoration: none;
  opacity: 0.9;
}
.tabs a:hover { opacity: 1; }
.tabs a.active {
  background: #151515;
}

/* ---------- Search ---------- */
.search {
  margin-top: 10px;
  display: flex;
  gap: 8px;
}
.search-input {
  flex: 1;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid #333;
  background: #0b0b0b;
  color: #fff;
  outline: none;
}
.search-btn {
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid #333;
  background: #151515;
  color: #fff;
  cursor: pointer;
}

/* ---------- TOC (post list) ---------- */
.toc {
  margin-top: 10px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.toc-link {
  display: block;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid #222;
  background: #0b0b0b;
  color: #fff;
  text-decoration: none;
  opacity: 0.92;
}
.toc-link:hover { opacity: 1; }
.toc-link.active {
  border-color: #444;
  background: #151515;
}

/* ---------- Pager ---------- */
.pager {
  display: flex;
  gap: 10px;
  align-items: center;
  margin-top: 10px;
}
.pager-nav {
  display: inline-flex;
  gap: 10px;
  align-items: center;
}

/* ---------- Content ---------- */
.content {
  margin-top: 12px;
}
.cover-img {
  width: 100%;
  height: auto;
  border-radius: 10px;
  display: block;
  margin: 10px 0 12px;
}

/* ---------- Markdown inserted image (B: [[img:id]]) ---------- */
/* 실제 렌더링 HTML은 <figure class="md-img"><img ...><figcaption ...> 구조라서
   클래스(.md-img__img/.md-img__cap) 대신 descendant selector가 안전합니다. */
.md-img { margin: 12px 0; }
.md-img img {
  width: 100%;
  height: auto;
  border-radius: 10px;
  display: block;
}
.md-img figcaption { margin-top: 6px; }

/* ---------- Gallery (A: 본문 아래 자동 갤러리) ---------- */
.gallery { margin-top: 12px; }

.gallery-item {
  margin: 0 0 12px 0;
}
.gallery-item img {
  width: 100%;
  height: auto;
  border-radius: 10px;
  display: block;
}
.gallery-item figcaption { margin-top: 6px; }



/* ---------- Lightbox ---------- */
.lightbox {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  padding: 18px;
  background: rgba(0,0,0,0.78);
  z-index: 9999;
}
.lightbox.open,
.lightbox[aria-hidden="false"] {
  display: flex;
}
.lightbox img {
  max-width: min(1100px, 96vw);
  max-height: 82vh;
  border-radius: 12px;
  -webkit-user-drag: none;
  user-select: none;
}
.lightbox .hint {
  margin-top: 10px;
  text-align: center;
  opacity: 0.9;
}
html.lb-open, html.lb-open body {
  overflow: hidden;
}

/* Lightbox controls */
.lightbox .lb-control {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 44px;
  height: 44px;
  border: 0;
  border-radius: 10px;

  background: rgba(0,0,0,0.85);
  color: #fff;

  font-size: 28px;
  line-height: 44px;
  text-align: center;

  cursor: pointer;
  user-select: none;

  z-index: 10001;
  box-shadow: 0 6px 18px rgba(0,0,0,0.35);
}

.lightbox .lb-prev { left: 24px; }
.lightbox .lb-next { right: 24px; }

.lightbox .lb-control:hover {
  background: rgba(0,0,0,0.95);
}

.lightbox .lb-control:focus-visible {
  outline: 2px solid rgba(255,255,255,0.75);
  outline-offset: 2px;
}

@media (max-width: 640px) {
  .lightbox .lb-prev { left: 14px; }
  .lightbox .lb-next { right: 14px; }
}


/* Lightbox loading */
.lightbox .lb-loading {
  position: absolute;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  pointer-events: none;
}

.lightbox.loading .lb-loading {
  display: flex;
}

.lightbox .lb-spinner {
  width: 42px;
  height: 42px;
  border-radius: 999px;
  border: 3px solid rgba(255,255,255,0.18);
  border-top-color: rgba(255,255,255,0.9);
  animation: lbspin 0.9s linear infinite;
}

@keyframes lbspin {
  to { transform: rotate(360deg); }
}

/* 이미지 페이드 인 */
.lightbox img {
  opacity: 1;
  transition: opacity 140ms ease;
}
.lightbox.loading img {
  opacity: 0.25;
}





html, body {
  height: 100%;
  background: #000;
}

body { margin:0; font-family: system-ui, sans-serif; overflow-x: hidden; }
.wrap { display:flex; min-height:100vh; background:#000; transition: padding-right 240ms ease; }

/* =========================
   LEFT: Globe area (항상 중앙)
   ========================= */
.globe {
  flex: 1;
  background:#000;
  color:#fff;
  height: 100vh;
  overflow: hidden;

  display: flex;
  align-items: center;
  justify-content: center;
}

/* 지구본 + UI가 들어가는 정사각 shell (좌측 영역에서 중앙) */
.globe-shell {
  position: relative;

  width: min(720px, 92vmin);
  aspect-ratio: 1 / 1;

  max-width: 100%;
  max-height: 100%;
}

/* WebGL mount: shell을 꽉 채움 */
.globe-mount {
  position: absolute;
  inset: 0;
}

/* UI 오버레이: shell 위에 떠있음(레이아웃 밀지 않음) */
.globe-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;

  display: flex;
  flex-direction: column;
  align-items: center;

  padding: 26px 18px 0;
  z-index: 10;

  pointer-events: none; /* 캔버스 드래그 방해 최소화 */
}

/* overlay 내부에서 클릭 가능한 래퍼 */
.globe-overlay .overlay-inner {
  width: min(560px, 92%);
  pointer-events: auto;
}


.globe-title {
  margin: 0 0 12px 0;
  font-size: 26px;
  font-weight: 800;
  letter-spacing: 0.2px;
  line-height: 1.1;

  /* 가독성만 살짝 */
  text-shadow: 0 8px 22px rgba(0,0,0,0.55);
}

/* 검색 영역 */
.search-wrap {
  position: relative; /* 드롭다운 absolute 기준 */
}

.country-search {
  width: 100%;
  padding: 11px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(10,10,10,0.55);
  color: #fff;
  outline: none;
  backdrop-filter: blur(8px);
}

/* ✅ 드롭다운 리스트: absolute로 떠서 지구본을 덮음(아래로 밀지 않음) */
.country-list {
  display: none;
  position: absolute;
  top: calc(100% + 10px);
  left: 0;
  right: 0;

  max-height: 260px;
  overflow: auto;
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 12px;
  padding: 10px;
  background: rgba(11,11,11,0.92);

  z-index: 20;
}

/* 포커스 중 또는 검색어가 있을 때만 표시 */
.search-wrap:focus-within .country-list { display: block; }
.country-list.has-query { display: block; }

.country-link {
  display:block;
  padding: 6px 8px;
  border-radius: 8px;
  text-decoration: none;
  opacity: .85;
  color: inherit;
}
.country-link:hover { background:#141414; opacity: 1; }
.country-link.active { background:#1a1a1a; text-decoration: underline; opacity: 1; }

.hint { opacity:.7; font-size: 14px; }

/* =========================
   Board (right)
   ========================= */
.board {
  position: fixed;
  top: 0;
  right: 0;
  height: 100vh;

  width: 420px;
  border-left: 1px solid #222;
  padding: 16px;
  background: #111;
  color:#fff;

  display: flex;
  flex-direction: column;

  transform: translateX(100%);
  opacity: 0;
  pointer-events: none;
  transition: transform 240ms ease, opacity 240ms ease;
}

.wrap.has-board .board {
  transform: translateX(0);
  opacity: 1;
  pointer-events: auto;
}

.wrap.closing .board {
  transform: translateX(100%);
  opacity: 0;
  pointer-events: none;
}

.wrap.has-board { padding-right: 420px; }
.wrap.no-board { padding-right: 0; }

/* ✅ 글 선택(읽기 모드)일 때: 목차/페이지네이션 숨김 */
#board.reading .toc { display: none; }
#board.reading .pager .pager-nav { display: none; }
#board.reading .pager .pager-back { display: inline-block; }

.pager { display:flex; gap:10px; align-items:center; margin-top:10px; }
.pager .pager-back { display: inline-block; }
.pager .pager-nav { display: inline-flex; gap:10px; align-items:center; }

#board.reading .content { margin-top: 10px; }

/* _board.html 공용 스타일 */
.board-header {
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 12px;
}

.close-btn {
  border: 1px solid #333;
  background: #151515;
  color: #fff;
  border-radius: 10px;
  padding: 6px 10px;
  cursor: pointer;
  opacity: .85;
  text-decoration: none;
}
.close-btn:hover { opacity: 1; }

.tabs { margin-top:14px; }
.tabs a { margin-right: 10px; opacity:.7; text-decoration:none; color: inherit; }
.tabs a.active { opacity:1; text-decoration:underline; }

.toc {
  margin-top: 12px;
  overflow: auto;
  border: 1px solid #222;
  border-radius: 10px;
  padding: 10px;
  background: #0f0f0f;
  max-height: 280px;
}
.toc a { display:block; padding:6px 0; text-decoration:none; border-bottom:1px solid #222; opacity:.8; color: inherit; }
.toc a.active { text-decoration: underline; opacity: 1; }

.content {
  margin-top: 12px;
  padding-top: 12px;
  border-top:1px solid #222;
  white-space: pre-wrap;
  flex: 1;
  overflow: auto;
  padding-right: 6px;
}
.content p { margin: 0 0 12px 0; line-height: 1.7; }
.content h1, .content h2, .content h3 { margin: 16px 0 10px; }
.content ul, .content ol { padding-left: 18px; margin: 8px 0 12px; }
.content a { text-decoration: underline; }
.content img { max-width: 100%; height: auto; border-radius: 10px; }

.content pre {
  padding: 12px;
  border: 1px solid #222;
  border-radius: 10px;
  overflow: auto;
  background: #0b0b0b;
}
.content code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 13px;
}

.htmx-indicator {
  position: fixed;
  top: 12px;
  right: 12px;
  z-index: 9999;

  display: none;
  padding: 8px 10px;
  border: 1px solid #333;
  border-radius: 10px;
  background: #151515;
  color: #fff;
  opacity: .9;
  font-size: 13px;
}
.htmx-indicator { display:none; }
.htmx-request .htmx-indicator,
.htmx-request.htmx-indicator { display:inline-block; }

/* 갤러리/본문 이미지 */
.gallery { display: flex; flex-direction: column; gap: 12px; margin-top: 12px; }
.gallery-item { margin: 0; }
.gallery-item img { display: block; width: 100%; border-radius: 10px; }

.md-img img {
  display: block;
  width: 100%;
  border-radius: 10px;
}
/* flag-icons 크기 조절 */
.fi {
  display: inline-block;
  width: 28px;
  height: 21px; /* 4:3 */
  border-radius: 6px;
  vertical-align: -3px;
}

/* 정사각(fis) 쓸 때 */
.fis {
  width: 22px;
  height: 22px;
}

/* =========================
   Phase 2-1: Board states
   - stable swap target: #boardContent
   ========================= */

#boardContent.board-content {
  display: flex;
  flex-direction: column;
  min-height: 0;
  flex: 1;
}

/* Overlays inside board */
#board {
  position: fixed;
}

.board-overlay {
  position: absolute;
  inset: 0;
  z-index: 50;

  display: flex;
  align-items: center;
  justify-content: center;

  padding: 16px;

  background: rgba(17,17,17,0.92);
  backdrop-filter: blur(6px);
}

.board-overlay[hidden] { display: none !important; }

.board-error-box {
  width: 100%;
  max-width: 360px;
  border: 1px solid #2a2a2a;
  border-radius: 14px;
  padding: 14px 14px 12px;
  background: rgba(10,10,10,0.65);
  box-shadow: 0 10px 28px rgba(0,0,0,0.35);
}

.board-error-title {
  font-size: 16px;
  font-weight: 800;
  margin-bottom: 6px;
}

.board-error-actions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
  justify-content: flex-end;
}

/* Skeleton */
.board-skeleton {
  width: 100%;
  max-width: 420px;
}

.sk-row {
  display: flex;
  gap: 10px;
  align-items: center;
}

.sk-col {
  flex-direction: column;
  align-items: stretch;
  gap: 10px;
}

.sk-spacer { height: 14px; }

.sk-line,
.sk-chip,
.sk-card {
  position: relative;
  overflow: hidden;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.06);
  background: rgba(255,255,255,0.06);
}

.sk-line { height: 14px; }
.sk-line.sk-40 { width: 40%; }
.sk-line.sk-60 { width: 60%; }
.sk-line.sk-70 { width: 70%; }
.sk-line.sk-75 { width: 75%; }
.sk-line.sk-85 { width: 85%; }

.sk-chip {
  width: 88px;
  height: 32px;
  border-radius: 999px;
}

.sk-card {
  height: 44px;
  border-radius: 12px;
}

.sk-line::before,
.sk-chip::before,
.sk-card::before {
  content: "";
  position: absolute;
  inset: 0;
  transform: translateX(-40%);
  background: linear-gradient(
    90deg,
    rgba(255,255,255,0.02),
    rgba(255,255,255,0.10),
    rgba(255,255,255,0.02)
  );
  animation: skshine 1.1s ease-in-out infinite;
}

@keyframes skshine {
  0% { transform: translateX(-60%); }
  100% { transform: translateX(60%); }
}

/* Empty state */
.board-empty {
  padding: 12px 4px;
}
